import nodemailer from "nodemailer";

// ConfiguraciÃ³n mejorada para Gmail con manejo de errores
const transporter = nodemailer.createTransporter({
  service: "gmail", // Usar 'gmail' en minÃºsculas
  auth: {
    user: process.env.EMAIL_USER,
    pass: process.env.EMAIL_PASS, // Debe ser una "App Password" de Gmail
  },
  // ConfiguraciÃ³n adicional para mayor compatibilidad
  secure: true, // true para 465, false para otros puertos
  tls: {
    rejectUnauthorized: false // Para desarrollo, remover en producciÃ³n
  }
});

// Verificar la configuraciÃ³n al inicializar
transporter.verify((error: any, success: any) => {
  if (error) {
    console.error('âŒ Error en configuraciÃ³n de email:', error.message);
    console.log('ğŸ“‹ Revisa la configuraciÃ³n de Gmail y las App Passwords');
  } else {
    console.log('âœ… Servidor de email configurado correctamente');
  }
});

export default transporter;